<!DOCTYPE html>
<html>
<head>
    <title>NumPy.js Browser Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .success { background-color: #d4edda; }
        .error { background-color: #f8d7da; }
        pre { background: #f8f9fa; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üß™ NumPy.js Browser Compatibility Test</h1>
    <div id="results"></div>

    <script src="numpy.js"></script>
    <script>
        const results = document.getElementById('results');
        
        function addTest(name, testFn) {
            const div = document.createElement('div');
            div.className = 'test';
            
            try {
                const result = testFn();
                div.className += ' success';
                div.innerHTML = `
                    <strong>‚úÖ ${name}</strong>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (e) {
                div.className += ' error';
                div.innerHTML = `
                    <strong>‚ùå ${name}</strong>
                    <pre>Error: ${e.message}</pre>
                `;
            }
            
            results.appendChild(div);
        }
        
        // Test that numpy functions are available globally
        addTest('NumPy functions available globally', () => {
            return {
                numpy_object: typeof numpy !== 'undefined',
                direct_functions: typeof zeros !== 'undefined',
                total_numpy_functions: typeof numpy !== 'undefined' ? Object.keys(numpy).length : 0
            };
        });
        
        // Test basic creation functions (both ways)
        addTest('Basic creation functions', () => {
            return {
                zeros_via_numpy: numpy.zeros(3),
                zeros_direct: zeros(3),
                ones_via_numpy: numpy.ones([2, 2]),
                eye_direct: eye(2)
            };
        });
        
        // Test mathematical functions
        addTest('Mathematical functions', () => {
            return {
                sin: numpy.sin(Math.PI/2),
                sqrt: numpy.sqrt(16),
                abs: numpy.abs(-5)
            };
        });
        
        // Test array operations
        addTest('Array operations', () => {
            const arr = [1, 2, 3, 4, 5];
            return {
                sum: numpy.sum(arr),
                mean: numpy.mean(arr),
                std: numpy.std(arr)
            };
        });
        
        // Test linear algebra
        addTest('Linear algebra functions', () => {
            const matrix = [[1, 2], [3, 4]];
            return {
                det: numpy.det(matrix),
                slogdet: numpy.slogdet(matrix)
            };
        });
        
        // Test advanced linalg
        addTest('Advanced linear algebra', () => {
            const matrix = [[2, 1], [1, 2]];
            const eigvals = numpy.eigvals(matrix);
            return {
                eigenvalues: eigvals,
                eigenvalue_count: eigvals.length
            };
        });
        
        // Test random functions
        addTest('Random functions', () => {
            numpy.seed(12345); // Set seed for reproducibility
            return {
                rand: numpy.rand(3),
                randint: numpy.randint(1, 10, 3),
                normal: numpy.normal(0, 1, 3)
            };
        });
        
        console.log('NumPy.js browser test completed!');
        console.log('Available functions:', Object.keys(numpy).length);
    </script>
</body>
</html>